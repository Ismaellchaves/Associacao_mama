 const saloes = [
      {
        id: "s1",
        nome: "SAL√ÉO VERAS",
        endereco: "Rua S√£o Jos√©, 500 ‚Äì Bairro S√£o Jos√©, Crate√∫s - CE",
        lat: -5.1701172,
        lng: -40.6775788,
        instagram: "",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/sQ24zmDfvGW3pZAB8"
      },
      {
        id: "s2",
        nome: "LIKA CABELEIREIROS ",
        endereco: "Rua Cl√≥vis Bevil√°qua, 1448 - Bairro Ipase/S√£o Vicente, Crate√∫s - CE",
        lat: -5.1851038,
        lng: -40.6718919,
        instagram: "https://www.instagram.com/lika.beautycenter?igsh=eHRxZnh4cjdjd3U4",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/8JCMUy6vpCCiFUSv5"
      },
      {
        id: "s3",
        nome: "REALCY CABELEIREIROS ",
        endereco: "Rua Dr Gomes Coutinho, 609 - Bairro S√£o Vicente, Crate√∫s - CE",
        lat: -5.178927,
        lng: -40.6676274,
        instagram: "https://www.instagram.com/realcycabeleireiros?igsh=dGNzODlmOGtkeXpw",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/b7TLKcDxcEKW2MJ59"
      },
      {
        id: "s4",
        nome: "IONETE CABELEIREIROS ",
        endereco: "Rua Dom Pedro II, 1234 - Bairro S√£o Vicente, Crate√∫s - CE",
        lat: -5.182568,
        lng: -40.6726161,
        instagram: "https://www.instagram.com/realcycabeleireiros?igsh=dGNzODlmOGtkeXpw",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/6wUARtFBC1BJWL4y9"
      },
      {
        id: "s5",
        nome: "K¬¥BELLUS STUDIO",
        endereco: "Rua Marechal Hermes, 103 - Bairro S√£o Vicente, Crate√∫s - CE",
        lat: -5.1761051,
        lng: -40.6653244,
        instagram: "",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/hyEc9LQsQsWt4Liu9"
      },
      {
        id: "s6",
        nome: "JONAS MAKE ",
        endereco: "Rua Jose Saboia Livreiro, 1495 - Fatima I - Crate√∫s,Ce",
        lat: -5.1770446,
        lng: -40.6834239,
        instagram: "https://www.instagram.com/jonas.beauty?igsh=MWw5MHp6NTBpdXNwcQ==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/WvLcSANrUm7gSREV7"
      },
      {
        id: "s7",
        nome: "SAL√ÉO NOVO VISUAL",
        endereco: "Rua S√£o Jos√©, 454 ‚Äì Bairro S√£o Jos√©, Crate√∫s - CE",
        lat: -5.1703099,
        lng: -40.6776065,
        instagram: "",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/mHtGme6zhvWC8tzt7"
      },
      {
        id: "s8",
        nome: "SAL√ÉO DE BELEZA E EST√âTICA JOANA D¬¥ARC",
        endereco: "Rua Dr Jos√© Coriolano, 92 ‚Äì Bairro Centro, Crate√∫s - CE",
        lat: -5.1733956,
        lng: -40.6707684,
        instagram: "https://www.instagram.com/joanadarcbelezaeestetica?igsh=MWh0cjJ2NWczdGhvdg==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/Fu1M9zhS3K3wDXJU7"
      },
      {
        id: "s9",
        nome: "MARIA DO CARMO - ATELI√ä DE BELEZA",
        endereco: "Rua Chico Ribeiro, 552 ‚Äì Bairro F√°tima II, Crate√∫s - CE",
        lat: -5.1874379,
        lng: -40.668582,
        instagram: "https://www.instagram.com/mariadocarmo_ateliedebeleza?igsh=MTViaHdpamJ0eG9uMQ==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/FCH5QfeJL8sWwDuv9"
      },
      {
        id: "s10",
        nome: "GILZA CABELEIREIRA",
        endereco: "Rua Poty, 1084 - Bairro Centro, Crate√∫s - CE",
        lat: -5.1731939,
        lng: -40.670419,
        instagram: "https://www.instagram.com/gilza_franca?igsh=MTU0anh0dmFjOHFpMg==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/6a9YxShAte1N1e2F8"
      },
      {
        id: "s11",
        nome: "STUDIO D'ELLAS BELEZA E EST√âTICA",
        endereco: "Rua Dr Moura Fe, 929 - Bairro S√£o Vicente, Crate√∫s - CE",
        lat: -5.1814619,
        lng: -40.6711867,
        instagram: "https://www.instagram.com/studio.dellas.belezaeestetica?igsh=MW9yYjI5NzVqNXQ0cA==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/jLF2fpvtQ3a9ZRx57"
      },
      {
        id: "s12",
        nome: "SANDRA CABELEIREIRA",
        endereco: "Rua Coronel L√∫cio, 138 - Bairro Centro, Crate√∫s - CE",
        lat: -5.1737218,
        lng: -40.6683816,
        instagram: "",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/U8Z26QuzzAunwjPa7"
      },
      {
        id: "s13",
        nome: "FABIANA CABELEIREIRA",
        endereco: "Rua Renato Braga, 1321 - Bairro F√°tima II, Crate√∫s - CE",
        lat: -5.1840877,
        lng: -40.6765889,
        instagram: "",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/pWbDoZiAsqTrkLkZ8"
      },
      {
        id: "s14",
        nome: "Cantinho Da J√¥",
        endereco: "Rua LUIS FERREIRA DO NASCIMENTO - Cidade 2000",
        lat: -5.155593,
        lng: -40.662878,
        instagram: "https://www.instagram.com/cantinhoo_jo?igsh=MWtzYzVtZ2YzNHBtZw==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/UZLwqHB34dhs6Zzz9"
      },
      {
        id: "s15",
        nome: "AMITES CABELEIREIRA MAQUIADORA",
        endereco: "Rua Cazuza Rocha, 256 - Bairro Centro, Novo Oriente - CE",
        lat: -5.536292,
        lng: -40.775267,
        instagram: "https://www.instagram.com/amites_sampaio?igsh=MWttcmtha2tpczF3ZA==",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/c2rfrt9HBY9wYr9i8"
      },
      {
        id: "s16",
        nome: "DJANE MAURIA",
        endereco: "Rua Abdias Veras, 815 - Bairro S√£o Vicente, Crate√∫s - CE",
        lat: -5.1810294,
        lng: -40.670171,
        instagram: "https://www.instagram.com/djane_mauriahair?igsh=aTFzemV0b3YyMnc4",
        imagem: "./assets/logomama.jpg",
        mapsUrl: "https://maps.app.goo.gl/FDm8QUUKSNJivPZW7"
      }
    ];

    let mapa, marcador, salaoAtual;

    // Menu Hamburguer
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    const overlay = document.getElementById('overlay');
    const body = document.body;

    hamburger.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      overlay.classList.toggle('active');
      body.classList.toggle('menu-open');
    });

    // Fechar menu ao clicar no overlay
    overlay.addEventListener('click', () => {
      navMenu.classList.remove('active');
      overlay.classList.remove('active');
      body.classList.remove('menu-open');
    });

    // Fechar menu ao clicar em um link
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        overlay.classList.remove('active');
        body.classList.remove('menu-open');
      });
    });

    // Fun√ß√£o para renderizar os sal√µes
    function renderizarSaloes() {
      const container = document.getElementById('saloes');
      container.innerHTML = '';

      saloes.forEach(salao => {
        const salaoElement = document.createElement('div');
        salaoElement.className = 'salao';
        salaoElement.id = salao.id;
        salaoElement.onclick = () => abrirPopup(salao);

        salaoElement.innerHTML = `
          <div class="salao-header">
            <img src="${salao.imagem}" alt="${salao.nome}" class="thumb" onerror="this.src='https://via.placeholder.com/86x86/FFD9EC/FF69B4?text=MAMA'">
            <div>
              <h3>${salao.nome}</h3>
              <p>${salao.endereco}</p>
            </div>
          </div>
          <div class="card-footer">
            <span class="foot-text">üíá‚Äç‚ôÄÔ∏è Clique para ver no mapa</span>
          </div>
        `;

        container.appendChild(salaoElement);
      });
    }

    // Fun√ß√£o para abrir popup do mapa
    function abrirPopup(salao) {
      salaoAtual = salao;
      document.getElementById("popupNome").textContent = salao.nome;
      const instaLink = document.getElementById("popupInsta");
      const mapsLink = document.getElementById("popupMaps");
      
      if (salao.instagram) {
        instaLink.href = salao.instagram;
        instaLink.style.display = 'inline-block';
      } else {
        instaLink.style.display = 'none';
      }
      
      // Usar o link do Google Maps diretamente
      mapsLink.href = salao.mapsUrl;
      
      document.getElementById("popup").style.display = "flex";

      const local = { lat: salao.lat, lng: salao.lng };
      
      // Inicializar mapa
      mapa = new google.maps.Map(document.getElementById("mapa"), {
        zoom: 17,
        center: local,
        styles: [
          {
            featureType: "poi",
            elementType: "labels",
            stylers: [{ visibility: "off" }]
          }
        ]
      });
      
      // Adicionar marcador personalizado
      marcador = new google.maps.Marker({
        position: local,
        map: mapa,
        title: salao.nome,
        icon: {
            url: "assets/locmama.png",
          scaledSize: new google.maps.Size(45, 45),
          anchor: new google.maps.Point(22.5, 45)
        }
      });

      // InfoWindow com informa√ß√µes do sal√£o
      const infoWindow = new google.maps.InfoWindow({
        content: `
          <div style="padding: 10px;">
            <h3 style="margin: 0 0 5px 0; color: #FF69B4;">${salao.nome}</h3>
            <p style="margin: 0; font-size: 14px;">${salao.endereco}</p>
            <a href="${salao.mapsUrl}" target="_blank" style="color: #4285F4; text-decoration: none; font-size: 12px; margin-top: 5px; display: block;">Abrir no Google Maps</a>
          </div>
        `
      });

      marcador.addListener('click', () => {
        infoWindow.open(mapa, marcador);
      });
    }

    // Fun√ß√£o para fechar popup do mapa
    function fecharPopup() {
      document.getElementById("popup").style.display = "none";
    }

    // Fun√ß√£o para abrir popup de busca
    function abrirPopupBusca() {
      document.getElementById("popupBusca").style.display = "flex";
      document.getElementById("cep").focus();
    }

    // Fun√ß√£o para fechar popup de busca
    function fecharPopupBusca() {
      document.getElementById("popupBusca").style.display = "none";
      document.getElementById("suggestions").style.display = "none";
    }

    // Fun√ß√£o para mudar entre abas
    function mudarAba(aba) {
      // Atualizar tabs
      document.querySelectorAll('.search-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelector(`.search-tab[onclick="mudarAba('${aba}')"]`).classList.add('active');
      
      // Atualizar conte√∫do
      document.querySelectorAll('.search-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(`${aba}-content`).classList.add('active');
      
      // Limpar sugest√µes
      document.getElementById("suggestions").style.display = "none";
      
      // Focar no campo correto
      if (aba === 'cep') {
        document.getElementById("cep").focus();
      } else {
        document.getElementById("nomeSalao").focus();
      }
    }

    // Fun√ß√£o para fechar popup sal√£o encontrado
    function fecharPopupSalaoEncontrado() {
      document.getElementById("popupSalaoEncontrado").style.display = "none";
    }

    // Fun√ß√£o para buscar sal√µes por CEP
    async function buscarPorCep() {
      const cep = document.getElementById("cep").value.replace(/\D/g, "");
      if (cep.length !== 8) {
        alert("Digite um CEP v√°lido com 8 d√≠gitos.");
        return;
      }

      try {
        // Primeiro, buscar as coordenadas do CEP usando geocoding
        const geocoder = new google.maps.Geocoder();
        
        geocoder.geocode({ 'address': `CEP ${cep}, Brasil` }, function(results, status) {
          if (status === 'OK' && results[0]) {
            const userLocation = results[0].geometry.location;
            const userLat = userLocation.lat();
            const userLng = userLocation.lng();

            // Fechar popup de busca
            document.getElementById("popupBusca").style.display = "none";

            // Calcular dist√¢ncia para cada sal√£o e encontrar o mais pr√≥ximo
            let maisProx = null;
            let menorDist = Infinity;

            saloes.forEach(s => {
              // F√≥rmula de Haversine para calcular dist√¢ncia em linha reta
              const R = 6371; // Raio da Terra em km
              const dLat = (s.lat - userLat) * Math.PI / 180;
              const dLng = (s.lng - userLng) * Math.PI / 180;
              const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(userLat * Math.PI / 180) * Math.cos(s.lat * Math.PI / 180) * 
                Math.sin(dLng/2) * Math.sin(dLng/2);
              const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
              const distancia = R * c; // Dist√¢ncia em km

              if (distancia < menorDist) {
                menorDist = distancia;
                maisProx = s;
              }
            });

            if (maisProx) {
              // Mostrar popup informando o sal√£o encontrado
              document.getElementById("salaoEncontradoNome").textContent = 
                `Sal√£o mais pr√≥ximo encontrado: ${maisProx.nome}\nDist√¢ncia aproximada: ${menorDist.toFixed(2)} km`;
              document.getElementById("popupSalaoEncontrado").style.display = "flex";
              
              // Piscar em verde o sal√£o encontrado (5 vezes)
              const el = document.getElementById(maisProx.id);
              el.classList.add("piscando-verde");
              
              // Scroll para o elemento
              el.scrollIntoView({ behavior: 'smooth', block: 'center' });
              
              // Remover anima√ß√£o ap√≥s 2.5 segundos (5 piscadas)
              setTimeout(() => {
                el.classList.remove("piscando-verde");
              }, 2500);
            } else {
              alert("Nenhum sal√£o encontrado pr√≥ximo a esta localiza√ß√£o.");
            }

          } else {
            alert("CEP n√£o encontrado ou erro na busca. Tente novamente.");
          }
        });

      } catch (error) {
        console.error("Erro ao buscar CEP:", error);
        alert("Erro ao buscar CEP. Tente novamente.");
      }
    }

    // Fun√ß√£o para buscar sal√µes por nome
    function buscarPorNome() {
      const nomeSalao = document.getElementById("nomeSalao").value.trim().toLowerCase();
      
      if (nomeSalao === "") {
        alert("Por favor, digite o nome de um sal√£o para buscar.");
        return;
      }

      // Fechar popup de busca
      document.getElementById("popupBusca").style.display = "none";

      // Buscar sal√µes que contenham o nome pesquisado
      const saloesEncontrados = saloes.filter(salao => 
        salao.nome.toLowerCase().includes(nomeSalao)
      );

      if (saloesEncontrados.length > 0) {
        // Mostrar popup informando os sal√µes encontrados
        const nomesSaloes = saloesEncontrados.map(s => s.nome).join(", ");
        document.getElementById("salaoEncontradoNome").textContent = 
          `Encontramos ${saloesEncontrados.length} sal√£o(√µes) com o nome pesquisado: ${nomesSaloes}`;
        document.getElementById("popupSalaoEncontrado").style.display = "flex";
        
        // Piscar em verde os sal√µes encontrados (5 vezes)
        saloesEncontrados.forEach(salao => {
          const el = document.getElementById(salao.id);
          if (el) {
            el.classList.add("piscando-verde");
          }
        });
        
        // Scroll para o primeiro elemento encontrado
        if (saloesEncontrados.length > 0) {
          const primeiroElemento = document.getElementById(saloesEncontrados[0].id);
          if (primeiroElemento) {
            primeiroElemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        }
        
        // Remover anima√ß√£o ap√≥s 2.5 segundos (5 piscadas)
        setTimeout(() => {
          saloesEncontrados.forEach(salao => {
            const el = document.getElementById(salao.id);
            if (el) {
              el.classList.remove("piscando-verde");
            }
          });
        }, 2500);
      } else {
        alert("Nenhum sal√£o encontrado com esse nome. Tente outro nome.");
      }
    }

    // Fun√ß√£o para mostrar sugest√µes de nomes de sal√µes
    function mostrarSugestoesNome() {
      const input = document.getElementById("nomeSalao");
      const sugestoes = document.getElementById("suggestions");
      const valor = input.value.trim().toLowerCase();
      
      if (valor.length < 2) {
        sugestoes.style.display = "none";
        return;
      }
      
      // Filtrar sal√µes que correspondem ao input
      const saloesFiltrados = saloes.filter(salao => 
        salao.nome.toLowerCase().includes(valor)
      );
      
      if (saloesFiltrados.length > 0) {
        sugestoes.innerHTML = saloesFiltrados.map(salao => 
          `<div class="suggestion-item" onclick="selecionarSugestaoNome('${salao.nome}')">${salao.nome}</div>`
        ).join('');
        sugestoes.style.display = "block";
      } else {
        sugestoes.style.display = "none";
      }
    }

    // Fun√ß√£o para selecionar uma sugest√£o de nome
    function selecionarSugestaoNome(nome) {
      document.getElementById("nomeSalao").value = nome;
      document.getElementById("suggestions").style.display = "none";
    }

    // Formatar CEP
    document.getElementById('cep').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 5) {
        value = value.substring(0,5) + '-' + value.substring(5,8);
      }
      e.target.value = value;
    });

    // Event listener para autocomplete de nome
    document.getElementById('nomeSalao').addEventListener('input', mostrarSugestoesNome);

    // Inicializar
    window.onload = () => {
      renderizarSaloes();
      // Mostrar popup de busca automaticamente
      setTimeout(() => {
        document.getElementById("popupBusca").style.display = "flex";
      }, 1000);
    }

    // Fechar popup ao clicar fora
    document.getElementById('popup').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharPopup();
      }
    });

    document.getElementById('popupBusca').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharPopupBusca();
      }
    });

    document.getElementById('popupSalaoEncontrado').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharPopupSalaoEncontrado();
      }
    });

    // Fechar com ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        fecharPopup();
        fecharPopupBusca();
        fecharPopupSalaoEncontrado();
        navMenu.classList.remove('active');
        overlay.classList.remove('active');
        body.classList.remove('menu-open');
      }
    });